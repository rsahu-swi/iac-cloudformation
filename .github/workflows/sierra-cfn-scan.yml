name: sierra-cfn-scan 

on: [push]


jobs:
  ## all scans
  sierra-cfn-scan:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: rsahu-swi/sierra-cfn-scan@main
      with:
        cloudformation_directory: "."
        scanner: "all"
    
    - name: running command
      run: ls -altr
      
    - name: Upload result to GitHub Code Scanning
      uses: github/codeql-action/upload-sarif@v2.1.32
      with:
        sarif_file: cfn_lint.sarif  
        
    - name: Upload result to GitHub Code Scanning
      uses: github/codeql-action/upload-sarif@v2.1.32
      with:
        sarif_file: cfn_nag.sarif 
        
    - name: Upload result to GitHub Code Scanning
      uses: github/codeql-action/upload-sarif@v2.1.32
      with:
        sarif_file: cfn_checkov.sarif     
